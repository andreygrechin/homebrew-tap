# This file was generated by GoReleaser. DO NOT EDIT.
cask "gitree" do
  name "gitree"
  desc "A CLI tool that scans directories for Git repos and displays them in a tree format with status information."
  homepage "https://github.com/andreygrechin/gitree"
  version "0.4.2"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "cmd/gitree"

  on_macos do
    on_intel do
      url "https://github.com/andreygrechin/gitree/releases/download/v#{version}/gitree_#{version}_darwin_x86_64.tar.gz"
      sha256 "bc850aeae6d4333bd9f9688c48c1befb683655b8028096a7cc7653b1bfe480b4"
    end
    on_arm do
      url "https://github.com/andreygrechin/gitree/releases/download/v#{version}/gitree_#{version}_darwin_arm64.tar.gz"
      sha256 "6a5e04b7ef96ed95cf69cf86e06016f1712946c4d8172afda6c3931876dcb610"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/andreygrechin/gitree/releases/download/v#{version}/gitree_#{version}_linux_x86_64.tar.gz"
      sha256 "cbf25d36e71c89ed9524784ea6d126b78ed541aebe0dc6a2d1db9c79269f26cc"
    end
  end

  postflight do
    if system_command("/usr/bin/xattr", args: ["-h"]).exit_status == 0
      system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/cmd/gitree"]
    end
  end

  caveats do
    "As part of the installation process, brew will automatically run the following command"
    "to remove the quarantine attribute:"
    "  /usr/bin/xattr -dr com.apple.quarantine .../gitree"
  end

  # No zap stanza required
end
