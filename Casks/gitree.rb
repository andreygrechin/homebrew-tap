# This file was generated by GoReleaser. DO NOT EDIT.
cask "gitree" do
  name "gitree"
  desc "A CLI tool that scans directories for Git repos and displays them in a tree format with status information."
  homepage "https://github.com/andreygrechin/gitree"
  version "0.4.1"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "cmd/gitree"

  on_macos do
    on_intel do
      url "https://github.com/andreygrechin/gitree/releases/download/v#{version}/gitree_#{version}_darwin_x86_64.tar.gz"
      sha256 "44651ba747bfd537cfe9ab39ae6fd0bc32a31349b31f4f7dcc88f050470d039e"
    end
    on_arm do
      url "https://github.com/andreygrechin/gitree/releases/download/v#{version}/gitree_#{version}_darwin_arm64.tar.gz"
      sha256 "9a5ad029f10beee2bac71a5b3fde81e5ebd2c0eb9d1c7843738586d50082dae8"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/andreygrechin/gitree/releases/download/v#{version}/gitree_#{version}_linux_x86_64.tar.gz"
      sha256 "343c3fb6a71aa34f91ce3f3fcef82a89e7e8345156e344f40d2583c84763fe6c"
    end
  end

  postflight do
    if system_command("/usr/bin/xattr", args: ["-h"]).exit_status == 0
      system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/cmd/gitree"]
    end
  end

  caveats do
    "As part of the installation process, brew will automatically run the following command"
    "to remove the quarantine attribute:"
    "  /usr/bin/xattr -dr com.apple.quarantine .../gitree"
  end

  # No zap stanza required
end
